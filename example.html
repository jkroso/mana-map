<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Google Maps User Interface</title>
    <link rel="stylesheet" href="style.css">
    <style media="screen">
      body {
        margin: 0;
      }
      .app {
        position: absolute;
      }
      .app,
      .google-map {
        width: 100%;
        height: 100%;
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3"></script>
    <script type="text/javascript">
      import {fromJS as immutable} from 'immutable'
      import {Map,Marker} from './'
      import {App,JSX} from 'mana'

      const data = immutable({zoom: 12}).set('center', {lat: -37.77, lng: 175.26})
      const markers = [
        {lat:-37.77,lng:175.26},
        {lat:-37.78,lng:175.29},
        {lat:-37.67,lng:175.39},
        {lat:-37.67,lng:175.14},
      ]
      const between = (n, a, b) => {
        const min = Math.min(a, b)
        const max = Math.max(a, b)
        return n > min && n < max
      }

      const app = new App(data, cursor => {
        const bounds = cursor.value.get('bounds', {})
        const pins = markers.map((m,i) => {
          if (!between(m.lat, bounds.top, bounds.bottom)) return
          if (!between(m.lng, bounds.left, bounds.right)) return
          return <Marker location={m}>{i}</Marker>
        })
        return <Map cursor={cursor}>{pins}</Map>
      })

      document.addEventListener('DOMContentLoaded', () => {
        app.mountIn(document.body)
      })
    </script>
  </head>
  <body></body>
</html>
